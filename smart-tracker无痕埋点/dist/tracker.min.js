/*!
* @your/father v1.0.6
*
* Copyright 2019, 小蝌蚪
*
*/
var Tracker=function(){"use strict";var r=function(t){throw new Error('"'+t+'" is read-only')};var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===a.call(t)}function v(t){if(!t||"[object Object]"!==a.call(t))return!1;var e,n=i.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&i.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;for(e in t);return void 0===e||i.call(t,e)}function h(t,e){c&&"__proto__"===e.name?c(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue}function p(t,e){if("__proto__"===e){if(!i.call(t,e))return;if(u)return u(t,e).value}return t[e]}function m(t,e){var n,r,o,i,a,c,u=t,l=1,s=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=e||{},l=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});l<s;++l)if(null!=(n=arguments[l]))for(r in n)o=p(u,r),u!==(i=p(n,r))&&(f&&i&&(v(i)||(a=d(i)))?(c=a?(a=!1,o&&d(o)?o:[]):o&&v(o)?o:{},h(u,{name:r,newValue:m(f,c,i)})):void 0!==i&&h(u,{name:r,newValue:i}));return u}var n=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t},i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;function s(t,e){var n=1<arguments.length&&void 0!==e&&e,r=[];if(!t||!t.tagName)return"";if(t.id)return"#".concat(t.id);if(r.push(t.tagName.toLowerCase()),n){var o=t.className;if(o&&"string"==typeof o){var i=o.split(/\s+/);r.push(".".concat(i.join(".")))}}return t.name&&r.push("[name=".concat(t.name,"]")),r.join("")}function f(t){return document.getElementById(t)||document.getElementsByName(t)[0]||document.querySelector(t)}var l={useClass:!1,per:.01,events:["click"]};return new(function(){function t(){e(this,t),this._isInstall=!1,this._options={}}return n(t,[{key:"config",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return(e=m(!0,{},l,e)).event=l.event,this._options=e,this}},{key:"_captureEvents",value:function(){for(var r=this,t=this._options.events,e=function(){var t="addEventListener",e="removeEventListener",n="";return window.addEventListener||(t="attachEvent",e="detachEvent",n="on"),{addMethod:t,removeMethod:e,prefix:n}}(),n=0,o=t.length;n<o;n++){var i=t[n];document.body[e.addMethod](e.prefix+i,function(t){var e,n=((e=(e=t)||window.event)&&(e.target||(e.target=e.srcElement),e.currentTarget||(e.currentTarget=e.srcElement)),e);n&&r._handleEvent(n)},!1)}}},{key:"_handleEvent",value:function(t){var e=parseFloat(this._options.per);if(this.hit(e)){var n=function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(!(t instanceof HTMLElement))return console.warn("input is not a HTML element!"),"";for(var r=[],o=t;o;){var i=s(o,n);if(!i)break;if(r.unshift(i),f(r.join(">"))===t||0<=i.indexOf("body"))break;r.shift();var a=o.parentNode.children;if(1<a.length)for(var c=0;c<a.length;c++)if(a[c]===o){i+=":nth-child(".concat(c+1,")");break}if(r.unshift(i),f(r.join(">"))===t)break;o=o.parentNode}return r.join(">")}(t.target,this._options.useClass),r=function(t){var e=t.getBoundingClientRect(),n=e.width||e.right-e.left,r=e.heigth||e.bottom-e.top;return m({},e,{width:n,heigth:r})}(t.target);if(0!=r.width&&0!=r.height){var o=document.documentElement||document.body.parentNode,i=(o&&"number"==typeof o.scrollLeft?o:document.body).scrollLeft,a=(o&&"number"==typeof o.scrollTop?o:document.body).scrollTop,c=t.pageX||t.clientX+i,u=t.pageY||t.clientY+a,l={domPath:encodeURIComponent(n),trackingType:t.type,offsetX:((c-r.left-i)/r.width).toFixed(6),offsetY:((u-r.top-a)/r.height).toFixed(6)};this.send(l)}}}},{key:"send",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};console.log("data",e);var n=new Image(1,1);n.onload=function(){r("image"),n=null},n.src="/?".concat(function(t){var e=[];for(var n in t)e.push("".concat(n,"=").concat(t[n]));return e.join("&")}(e))}},{key:"hit",value:function(t){var e=0<arguments.length&&void 0!==t?t:.01;return Math.random()<e}},{key:"install",value:function(){return this._isInstall||(this._captureEvents(),this._isInstall=!0),this}}]),t}())}();
//# sourceMappingURL=tracker.min.js.map
